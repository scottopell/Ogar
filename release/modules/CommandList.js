'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = help;
exports.addbot = addbot;
exports.board = board;
exports.boardreset = boardreset;
exports.change = change;
exports.clear = clear;
exports.color = color;
exports.exit = exit;
exports.food = food;
exports.gamemode = gamemode;
exports.kick = kick;
exports.kill = kill;
exports.killall = killall;
exports.mass = mass;
exports.name = name;
exports.playerlist = playerlist;
exports.pause = pause;
exports.reload = reload;
exports.status = status;
exports.tp = tp;
exports.virus = virus;

var _gamemodesIndex = require('../gamemodes/index');

var _entityIndex = require('../entity/index');

var fillChar = function fillChar(data, charr, fieldLength, rTL) {
    var result = data.toString();
    if (rTL === true) {
        for (var i = result.length; i < fieldLength; i++) {
            result = charr.concat(result);
        }
    } else {
        for (var i = result.length; i < fieldLength; i++) {
            result = result.concat(charr);
        }
    }
    return result;
};

function help(gameServer, split) {
    console.log("[Console] ======================== HELP ======================");
    console.log("[Console] addbot     : add bot to the server");
    console.log("[Console] board      : set scoreboard text");
    console.log("[Console] boardreset : reset scoreboard text");
    console.log("[Console] change     : change specified settings");
    console.log("[Console] clear      : clear console output");
    console.log("[Console] color      : set cell(s) color by client ID");
    console.log("[Console] exit       : stop the server");
    console.log("[Console] food       : spawn food at specified Location");
    console.log("[Console] gamemode   : change server gamemode");
    console.log("[Console] kick       : kick player or bot by client ID");
    console.log("[Console] kill       : kill cell(s) by client ID");
    console.log("[Console] killall    : kill everyone");
    console.log("[Console] mass       : set cell(s) mass by client ID");
    console.log("[Console] name       : change cell(s) name by client ID");
    console.log("[Console] playerlist : get list of players and bots");
    console.log("[Console] pause      : pause game , freeze all cells");
    console.log("[Console] reload     : reload config");
    console.log("[Console] status     : get server status");
    console.log("[Console] tp         : teleport player to specified location");
    console.log("[Console] virus      : spawn virus at a specified Location");
    console.log("[Console] ====================================================");
}

function addbot(gameServer, split) {
    var add = parseInt(split[1]);
    if (isNaN(add)) {
        add = 1;
    }
    for (var i = 0; i < add; i++) {
        gameServer.bots.addBot();
    }
    console.log("[Console] Added " + add + " player bots");
}

function board(gameServer, split) {
    var newLB = [];
    for (var i = 1; i < split.length; i++) {
        newLB[i - 1] = split[i];
    }
    gameServer.gameMode.packetLB = 48;
    gameServer.gameMode.specByLeaderboard = false;
    gameServer.gameMode.updateLB = function (gameServer) {
        gameServer.leaderboard = newLB;
    };
    console.log("[Console] Successfully changed leaderboard values");
}

function boardreset(gameServer) {
    var gm = (0, _gamemodesIndex.get)(gameServer.gameMode.ID);
    gameServer.gameMode.packetLB = gm.packetLB;
    gameServer.gameMode.updateLB = gm.updateLB;
    console.log("[Console] Successfully reset leaderboard");
}

function change(gameServer, split) {
    var key = split[1];
    var value = split[2];
    if (value.indexOf('.') != -1) {
        value = parseFloat(value);
    } else {
        value = parseInt(value);
    }
    if (typeof gameServer.config[key] != 'undefined') {
        gameServer.config[key] = value;
        console.log("[Console] Set " + key + " to " + value);
    } else {
        console.log("[Console] Invalid config value");
    }
}

function clear() {
    process.stdout.write('\u001b[2J\u001b[0;0H');
}

function color(gameServer, split) {
    var id = parseInt(split[1]);
    if (isNaN(id)) {
        console.log("[Console] Please specify a valid player ID!");
        return;
    }
    var color = { r: 0, g: 0, b: 0 };
    color.r = Math.max(Math.min(parseInt(split[2]), 255), 0);
    color.g = Math.max(Math.min(parseInt(split[3]), 255), 0);
    color.b = Math.max(Math.min(parseInt(split[4]), 255), 0);
    for (var i in gameServer.clients) {
        if (gameServer.clients[i].playerTracker.pID == id) {
            var client = gameServer.clients[i].playerTracker;
            client.setColor(color);
            for (var j in client.cells) {
                client.cells[j].setColor(color);
            }
            break;
        }
    }
}

function exit(gameServer, split) {
    console.log("[Console] Closing server...");
    gameServer.socketServer.close();
    process.exit(1);
}

function food(gameServer, split) {
    var pos = { x: parseInt(split[1]), y: parseInt(split[2]) };
    var mass = parseInt(split[3]);
    if (isNaN(pos.x) || isNaN(pos.y)) {
        console.log("[Console] Invalid coordinates");
        return;
    }
    if (isNaN(mass)) {
        mass = gameServer.config.foodStartMass;
    }
    var f = new _entityIndex.Food(gameServer.getNextNodeId(), null, pos, mass, null);
    f.setColor(gameServer.getRandomColor());
    gameServer.addNode(f);
    gameServer.currentFood++;
    console.log("[Console] Spawned 1 food cell at (" + pos.x + " , " + pos.y + ")");
}

function gamemode(gameServer, split) {
    try {
        var n = parseInt(split[1]);
        var gm = (0, _gamemodesIndex.get)(n);
        gameServer.gameMode.onChange(gameServer);
        gameServer.gameMode = gm;
        gameServer.gameMode.onServerInit(gameServer);
        console.log("[Game] Changed game mode to " + gameServer.gameMode.name);
    } catch (e) {
        console.log("[Console] Invalid game mode selected");
    }
}

function kick(gameServer, split) {
    var id = parseInt(split[1]);
    if (isNaN(id)) {
        console.log("[Console] Please specify a valid player ID!");
        return;
    }
    for (var i in gameServer.clients) {
        if (gameServer.clients[i].playerTracker.pID == id) {
            var client = gameServer.clients[i].playerTracker;
            var len = client.cells.length;
            for (var j = 0; j < len; j++) {
                gameServer.removeNode(client.cells[0]);
            }
            client.socket.close();
            console.log("[Console] Kicked " + client.name);
            break;
        }
    }
}

function kill(gameServer, split) {
    var id = parseInt(split[1]);
    if (isNaN(id)) {
        console.log("[Console] Please specify a valid player ID!");
        return;
    }
    var count = 0;
    for (var i in gameServer.clients) {
        if (gameServer.clients[i].playerTracker.pID == id) {
            var client = gameServer.clients[i].playerTracker;
            var len = client.cells.length;
            for (var j = 0; j < len; j++) {
                gameServer.removeNode(client.cells[0]);
                count++;
            }
            console.log("[Console] Removed " + count + " cells");
            break;
        }
    }
}

function killall(gameServer, split) {
    var count = 0;
    var len = gameServer.nodesPlayer.length;
    for (var i = 0; i < len; i++) {
        gameServer.removeNode(gameServer.nodesPlayer[0]);
        count++;
    }
    console.log("[Console] Removed " + count + " cells");
}

function mass(gameServer, split) {
    var id = parseInt(split[1]);
    if (isNaN(id)) {
        console.log("[Console] Please specify a valid player ID!");
        return;
    }
    var amount = Math.max(parseInt(split[2]), 9);
    if (isNaN(amount)) {
        console.log("[Console] Please specify a valid number");
        return;
    }
    for (var i in gameServer.clients) {
        if (gameServer.clients[i].playerTracker.pID == id) {
            var client = gameServer.clients[i].playerTracker;
            for (var j in client.cells) {
                client.cells[j].mass = amount;
            }
            console.log("[Console] Set mass of " + client.name + " to " + amount);
            break;
        }
    }
}

function name(gameServer, split) {
    var id = parseInt(split[1]);
    if (isNaN(id)) {
        console.log("[Console] Please specify a valid player ID!");
        return;
    }
    var name = split.slice(2, split.length).join(' ');
    if (typeof name == 'undefined') {
        console.log("[Console] Please type a valid name");
        return;
    }
    for (var i = 0; i < gameServer.clients.length; i++) {
        var client = gameServer.clients[i].playerTracker;
        if (client.pID == id) {
            console.log("[Console] Changing " + client.name + " to " + name);
            client.name = name;
            return;
        }
    }
    console.log("[Console] Player " + id + " was not found");
}

function playerlist(gameServer, split) {
    console.log("[Console] Showing " + gameServer.clients.length + " players: ");
    console.log(" ID         | IP              | " + fillChar('NICK', ' ', gameServer.config.playerMaxNickLength, false) + " | CELLS | SCORE  | POSITION    ");
    console.log(fillChar('', '-', ' ID         | IP              |  | CELLS | SCORE  | POSITION    '.length + gameServer.config.playerMaxNickLength, false));
    for (var i = 0; i < gameServer.clients.length; i++) {
        var client = gameServer.clients[i].playerTracker;
        var id = fillChar(client.pID, ' ', 10, true);
        var ip = "BOT";
        if (typeof gameServer.clients[i].remoteAddress != 'undefined') {
            ip = gameServer.clients[i].remoteAddress;
        }
        ip = fillChar(ip, ' ', 15, false);
        var nick = '',
            cells = '',
            score = '',
            position = '',
            data = '';
        if (client.spectate) {
            try {
                if (gameServer.getMode().specByLeaderboard) {
                    nick = gameServer.leaderboard[client.spectatedPlayer].name;
                } else {
                    nick = gameServer.clients[client.spectatedPlayer].playerTracker.name;
                }
            } catch (e) {
                nick = "";
            }
            nick = nick == "" ? "An unnamed cell" : nick;
            data = fillChar("SPECTATING: " + nick, '-', ' | CELLS | SCORE  | POSITION    '.length + gameServer.config.playerMaxNickLength, true);
            console.log(" " + id + " | " + ip + " | " + data);
        } else if (client.cells.length > 0) {
            nick = fillChar(client.name == "" ? "An unnamed cell" : client.name, ' ', gameServer.config.playerMaxNickLength, false);
            cells = fillChar(client.cells.length, ' ', 5, true);
            score = fillChar(client.getScore(true), ' ', 6, true);
            position = fillChar(client.centerPos.x >> 0, ' ', 5, true) + ', ' + fillChar(client.centerPos.y >> 0, ' ', 5, true);
            console.log(" " + id + " | " + ip + " | " + nick + " | " + cells + " | " + score + " | " + position);
        } else {
            data = fillChar('DEAD OR NOT PLAYING', '-', ' | CELLS | SCORE  | POSITION    '.length + gameServer.config.playerMaxNickLength, true);
            console.log(" " + id + " | " + ip + " | " + data);
        }
    }
}

function pause(gameServer, split) {
    gameServer.run = !gameServer.run;
    var s = gameServer.run ? "Unpaused" : "Paused";
    console.log("[Console] " + s + " the game.");
}

function reload(gameServer) {
    gameServer.loadConfig();
    console.log("[Console] Reloaded the config file successfully");
}

function status(gameServer, split) {
    var humans = 0,
        bots = 0;
    for (var i = 0; i < gameServer.clients.length; i++) {
        if ('_socket' in gameServer.clients[i]) {
            humans++;
        } else {
            bots++;
        }
    }
    console.log("[Console] Connected players: " + gameServer.clients.length + "/" + gameServer.config.serverMaxConnections);
    console.log("[Console] Players: " + humans + " Bots: " + bots);
    console.log("[Console] Server has been running for " + process.uptime() + " seconds.");
    console.log("[Console] Current memory usage: " + process.memoryUsage().heapUsed / 1000 + "/" + process.memoryUsage().heapTotal / 1000 + " kb");
    console.log("[Console] Current game mode: " + gameServer.gameMode.name);
}

function tp(gameServer, split) {
    var id = parseInt(split[1]);
    if (isNaN(id)) {
        console.log("[Console] Please specify a valid player ID!");
        return;
    }
    var pos = { x: parseInt(split[2]), y: parseInt(split[3]) };
    if (isNaN(pos.x) || isNaN(pos.y)) {
        console.log("[Console] Invalid coordinates");
        return;
    }
    for (var i in gameServer.clients) {
        if (gameServer.clients[i].playerTracker.pID == id) {
            var client = gameServer.clients[i].playerTracker;
            for (var j in client.cells) {
                client.cells[j].position.x = pos.x;
                client.cells[j].position.y = pos.y;
            }
            console.log("[Console] Teleported " + client.name + " to (" + pos.x + " , " + pos.y + ")");
            break;
        }
    }
}

function virus(gameServer, split) {
    var pos = { x: parseInt(split[1]), y: parseInt(split[2]) };
    var mass = parseInt(split[3]);
    if (isNaN(pos.x) || isNaN(pos.y)) {
        console.log("[Console] Invalid coordinates");
        return;
    }
    if (isNaN(mass)) {
        mass = gameServer.config.virusStartMass;
    }
    var v = new _entityIndex.Virus(gameServer.getNextNodeId(), null, pos, mass, null);
    gameServer.addNode(v);
    console.log("[Console] Spawned 1 virus at (" + pos.x + " , " + pos.y + ")");
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZXMvQ29tbWFuZExpc3QudHMiXSwibmFtZXMiOlsiaGVscCIsImFkZGJvdCIsImJvYXJkIiwiYm9hcmRyZXNldCIsImNoYW5nZSIsImNsZWFyIiwiY29sb3IiLCJleGl0IiwiZm9vZCIsImdhbWVtb2RlIiwia2ljayIsImtpbGwiLCJraWxsYWxsIiwibWFzcyIsIm5hbWUiLCJwbGF5ZXJsaXN0IiwicGF1c2UiLCJyZWxvYWQiLCJzdGF0dXMiLCJ0cCIsInZpcnVzIl0sIm1hcHBpbmdzIjoiOzs7OztxQkFvQkEsSUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs4QkFuQmlDLG9CQUFvQjs7MkJBQzNCLGlCQUFpQjs7QUFHM0MsSUFBSSxRQUFRLEdBQUcsU0FBWCxRQUFRLENBQWEsSUFBSSxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsR0FBRyxFQUFBO0FBQ3BELFFBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztBQUM3QixRQUFJLEdBQUcsS0FBSyxJQUFJLEVBQUU7QUFDaEIsYUFBSyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxXQUFXLEVBQUUsQ0FBQyxFQUFFLEVBQUM7QUFDL0Msa0JBQU0sR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQy9CO0tBQ0YsTUFBTTtBQUNMLGFBQUssSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsV0FBVyxFQUFFLENBQUMsRUFBRSxFQUFDO0FBQy9DLGtCQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUMvQjtLQUNGO0FBQ0QsV0FBTyxNQUFNLENBQUM7Q0FDZixDQUFDOztBQUdGLFNBQUEsSUFBQSxDQUE2QixVQUFVLEVBQUMsS0FBSyxFQUFBO0FBQzNDQSxXQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxnRUFBZ0VBLENBQUNBLENBQUNBO0FBQzlFQSxXQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSw4Q0FBOENBLENBQUNBLENBQUNBO0FBQzVEQSxXQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSw0Q0FBNENBLENBQUNBLENBQUNBO0FBQzFEQSxXQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSw4Q0FBOENBLENBQUNBLENBQUNBO0FBQzVEQSxXQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxrREFBa0RBLENBQUNBLENBQUNBO0FBQ2hFQSxXQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSw2Q0FBNkNBLENBQUNBLENBQUNBO0FBQzNEQSxXQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSx1REFBdURBLENBQUNBLENBQUNBO0FBQ3JFQSxXQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSx3Q0FBd0NBLENBQUNBLENBQUNBO0FBQ3REQSxXQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSx5REFBeURBLENBQUNBLENBQUNBO0FBQ3ZFQSxXQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSwrQ0FBK0NBLENBQUNBLENBQUNBO0FBQzdEQSxXQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSx3REFBd0RBLENBQUNBLENBQUNBO0FBQ3RFQSxXQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxrREFBa0RBLENBQUNBLENBQUNBO0FBQ2hFQSxXQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxzQ0FBc0NBLENBQUNBLENBQUNBO0FBQ3BEQSxXQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxzREFBc0RBLENBQUNBLENBQUNBO0FBQ3BFQSxXQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSx5REFBeURBLENBQUNBLENBQUNBO0FBQ3ZFQSxXQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxxREFBcURBLENBQUNBLENBQUNBO0FBQ25FQSxXQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxzREFBc0RBLENBQUNBLENBQUNBO0FBQ3BFQSxXQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxzQ0FBc0NBLENBQUNBLENBQUNBO0FBQ3BEQSxXQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSwwQ0FBMENBLENBQUNBLENB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QUFHQSxVQUFVQSxDQUFDQSxNQUFNQSxDQUFDQSxtQkFBbUJBLEVBQUVBLElBQUlBLENBQUNBLENBQUNBO0FBQ3JJQSxtQkFBT0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsR0FBR0EsR0FBR0EsRUFBRUEsR0FBR0EsS0FBS0EsR0FBR0EsRUFBRUEsR0FBR0EsS0FBS0EsR0FBR0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7U0FDbkRBLE1BQU1BLElBQUlBLE1BQU1BLENBQUNBLEtBQUtBLENBQUNBLE1BQU1BLEdBQUdBLENBQUNBLEVBQUVBO0FBQ2xDQSxnQkFBSUEsR0FBR0EsUUFBUUEsQ0FBQ0EsQUFBQ0EsTUFBTUEsQ0FBQ0EsSUFBSUEsSUFBSUEsRUFBRUEsR0FBSUEsaUJBQWlCQSxHQUFHQSxNQUFNQSxDQUFDQSxJQUFJQSxFQUFFQSxHQUFHQSxFQUFFQSxVQUFVQSxDQUFDQSxNQUFNQSxDQUFDQSxtQkFBbUJBLEVBQUVBLEtBQUtBLENBQUNBLENBQUNBO0FBQzFIQSxpQkFBS0EsR0FBR0EsUUFBUUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsTUFBTUEsRUFBRUEsR0FBR0EsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsQ0FBQ0EsQ0FBQ0E7QUFDcERBLGlCQUFLQSxHQUFHQSxRQUFRQSxDQUFDQSxNQUFNQSxDQUFDQSxRQUFRQSxDQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxHQUFHQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxDQUFDQSxDQUFDQTtBQUN0REEsb0JBQVFBLEdBQUdBLFFBQVFBLENBQUNBLE1BQU1BLENBQUNBLFNBQVNBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLEVBQUVBLEdBQUdBLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLENBQUNBLEdBQUdBLElBQUlBLEdBQUdBLFFBQVFBLENBQUNBLE1BQU1BLENBQUNBLFNBQVNBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLEVBQUVBLEdBQUdBLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLENBQUNBLENBQUNBO0FBQ3BIQSxtQkFBT0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsR0FBR0EsR0FBQ0EsRUFBRUEsR0FBQ0EsS0FBS0EsR0FBQ0EsRUFBRUEsR0FBQ0EsS0FBS0EsR0FBQ0EsSUFBSUEsR0FBQ0EsS0FBS0EsR0FBQ0EsS0FBS0EsR0FBQ0EsS0FBS0EsR0FBQ0EsS0FBS0EsR0FBQ0EsS0FBS0EsR0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0E7U0FDaEZBLE1BQU1BO0FBRUxBLGdCQUFJQSxHQUFHQSxRQUFRQSxDQUFDQSxxQkFBcUJBLEVBQUVBLEdBQUdBLEVBQUVBLGtDQUFrQ0EsQ0FBQ0EsTUFBTUEsR0FBR0EsVUFBVUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsbUJBQW1CQSxFQUFFQSxJQUFJQSxDQUFDQSxDQUFDQTtBQUNySUEsbUJBQU9BLENBQUNBLEdBQUdBLENBQUNBLEdBQUdBLEdBQUdBLEVBQUVBLEdBQUdBLEtBQUtBLEdBQUdBLEVBQUVBLEdBQUdBLEtBQUtBLEdBQUdBLElBQUlBLENBQUNBLENBQUNBO1NBQ25EQTtLQUNGQTtDQUNGQTs7QUFDRCxTQUFBLEtBQUEsQ0FBc0IsVUFBVSxFQUFDLEtBQUssRUFBQTtBQUNwQ0MsY0FBVUEsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsVUFBVUEsQ0FBQ0EsR0FBR0EsQ0FBQ0E7QUFDakNBLFFBQUlBLENBQUNBLEdBQUdBLFVBQVVBLENBQUNBLEdBQUdBLEdBQUdBLFVBQVVBLEdBQUdBLFFBQVFBLENBQUNBO0FBQy9DQSxXQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxZQUFZQSxHQUFHQSxDQUFDQSxHQUFHQSxZQUFZQSxDQUFDQSxDQUFDQTtDQUM5Q0E7O0FBQ0QsU0FBQSxNQUFBLENBQXVCLFVBQVUsRUFBQTtBQUMvQkMsY0FBVUEsQ0FBQ0EsVUFBVUEsRUFBRUEsQ0FBQ0E7QUFDeEJBLFdBQU9BLENBQUNBLEdBQUdBLENBQUNBLGlEQUFpREEsQ0FBQ0EsQ0FBQ0E7Q0FDaEVBOztBQUNELFNBQUEsTUFBQSxDQUF1QixVQUFVLEVBQUMsS0FBSyxFQUFBO0FBRXJDQyxRQUFJQSxNQUFNQSxHQUFHQSxDQUFDQTtRQUFFQSxJQUFJQSxHQUFHQSxDQUFDQSxDQUFDQTtBQUN6QkEsU0FBS0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsVUFBVUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsRUFBRUE7QUFDbERBLFlBQUlBLFNBQVNBLElBQUlBLFVBQVVBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLEVBQUVBO0FBQ3RDQSxrQkFBTUEsRUFBRUEsQ0FBQ0E7U0FDVkEsTUFBTUE7QUFDTEEsZ0JBQUlBLEVBQUVBLENBQUNBO1NBQ1JBO0tBQ0ZBO0FBRURBLFdBQU9BLENBQUNBLEdBQUdBLENBQUNBLCtCQUErQkEsR0FBQ0EsVUFBVUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsTUFBTUEsR0FBQ0EsR0FBR0EsR0FBQ0EsVUFBVUEsQ0FBQ0EsTUFBTUEsQ0FBQ0Esb0JBQW9CQSxDQUFDQSxDQUFDQTtBQUNsSEEsV0FBT0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EscUJBQXFCQSxHQUFDQSxNQUFNQSxHQUFDQSxTQUFTQSxHQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtBQUN6REEsV0FBT0EsQ0FBQ0EsR0FBR0EsQ0FBQ0Esd0NBQXdDQSxHQUFDQSxPQUFPQSxDQUFDQSxNQUFNQSxFQUFFQSxHQUFDQSxXQUFXQSxDQUFDQSxDQUFDQTtBQUNuRkEsV0FBT0EsQ0FBQ0EsR0FBR0EsQ0FBQ0Esa0NBQWtDQSxHQUFDQSxPQUFPQSxDQUFDQSxXQUFXQSxFQUFFQSxDQUFDQSxRQUFRQSxHQUFDQSxJQUFJQSxHQUFDQSxHQUFHQSxHQUFDQSxPQUFPQSxDQUFDQSxXQUFXQSxFQUFFQSxDQUFDQSxTQUFTQSxHQUFDQSxJQUFJQSxHQUFDQSxLQUFLQSxDQUFDQSxDQUFDQTtBQUNuSUEsV0FBT0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsK0JBQStCQSxHQUFDQSxVQUFVQSxDQUFDQSxRQUFRQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtDQUN2RUE7O0FBQ0QsU0FBQSxFQUFBLENBQW1CLFVBQVUs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QSxJQUFJQSxFQUFFQSxHQUFHQSxFQUFFQSxJQUFJQSxFQUFFQSxJQUFJQSxDQUFDQSxDQUFDQTtBQUNyRUEsY0FBVUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7QUFDdEJBLFdBQU9BLENBQUNBLEdBQUdBLENBQUNBLGdDQUFnQ0EsR0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBQ0EsS0FBS0EsR0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7Q0FDckVBIiwiZmlsZSI6Im1vZHVsZXMvQ29tbWFuZExpc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnRzXG5pbXBvcnQge2dldCBhcyBnZXRHYW1lTW9kZX0gZnJvbSAnLi4vZ2FtZW1vZGVzL2luZGV4JztcbmltcG9ydCB7Rm9vZCwgVmlydXN9IGZyb20gJy4uL2VudGl0eS9pbmRleCc7XG5cbi8vIFV0aWxzXG52YXIgZmlsbENoYXIgPSBmdW5jdGlvbiAoZGF0YSwgY2hhcnIsIGZpZWxkTGVuZ3RoLCByVEwpIHtcbiAgdmFyIHJlc3VsdCA9IGRhdGEudG9TdHJpbmcoKTtcbiAgaWYgKHJUTCA9PT0gdHJ1ZSkge1xuICAgIGZvciAodmFyIGkgPSByZXN1bHQubGVuZ3RoOyBpIDwgZmllbGRMZW5ndGg7IGkrKyl7XG4gICAgICByZXN1bHQgPSBjaGFyci5jb25jYXQocmVzdWx0KTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZm9yICh2YXIgaSA9IHJlc3VsdC5sZW5ndGg7IGkgPCBmaWVsZExlbmd0aDsgaSsrKXtcbiAgICAgIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQoY2hhcnIpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8gQ29tbWFuZHNcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGhlbHAoZ2FtZVNlcnZlcixzcGxpdCkge1xuICBjb25zb2xlLmxvZyhcIltDb25zb2xlXSA9PT09PT09PT09PT09PT09PT09PT09PT0gSEVMUCA9PT09PT09PT09PT09PT09PT09PT09XCIpO1xuICBjb25zb2xlLmxvZyhcIltDb25zb2xlXSBhZGRib3QgICAgIDogYWRkIGJvdCB0byB0aGUgc2VydmVyXCIpO1xuICBjb25zb2xlLmxvZyhcIltDb25zb2xlXSBib2FyZCAgICAgIDogc2V0IHNjb3JlYm9hcmQgdGV4dFwiKTtcbiAgY29uc29sZS5sb2coXCJbQ29uc29sZV0gYm9hcmRyZXNldCA6IHJlc2V0IHNjb3JlYm9hcmQgdGV4dFwiKTtcbiAgY29uc29sZS5sb2coXCJbQ29uc29sZV0gY2hhbmdlICAgICA6IGNoYW5nZSBzcGVjaWZpZWQgc2V0dGluZ3NcIik7XG4gIGNvbnNvbGUubG9nKFwiW0NvbnNvbGVdIGNsZWFyICAgICAgOiBjbGVhciBjb25zb2xlIG91dHB1dFwiKTtcbiAgY29uc29sZS5sb2coXCJbQ29uc29sZV0gY29sb3IgICAgICA6IHNldCBjZWxsKHMpIGNvbG9yIGJ5IGNsaWVudCBJRFwiKTtcbiAgY29uc29sZS5sb2coXCJbQ29uc29sZV0gZXhpdCAgICAgICA6IHN0b3AgdGhlIHNlcnZlclwiKTtcbiAgY29uc29sZS5sb2coXCJbQ29uc29sZV0gZm9vZCAgICAgICA6IHNwYXduIGZvb2QgYXQgc3BlY2lmaWVkIExvY2F0aW9uXCIpO1xuICBjb25zb2xlLmxvZyhcIltDb25zb2xlXSBnYW1lbW9kZSAgIDogY2hhbmdlIHNlcnZlciBnYW1lbW9kZVwiKTtcbiAgY29uc29sZS5sb2coXCJbQ29uc29sZV0ga2ljayAgICAgICA6IGtpY2sgcGxheWVyIG9yIGJvdCBieSBjbGllbnQgSURcIik7XG4gIGNvbnNvbGUubG9nKFwiW0NvbnNvbGVdIGtpbGwgICAgICAgOiBraWxsIGNlbGwocykgYnkgY2xpZW50IElEXCIpO1xuICBjb25zb2xlLmxvZyhcIltDb25zb2xlXSBraWxsYWxsICAgIDoga2lsbCBldmVyeW9uZVwiKTtcbiAgY29uc29sZS5sb2coXCJbQ29uc29sZV0gbWFzcyAgICAgICA6IHNldCBjZWxsKHMpIG1hc3MgYnkgY2xpZW50IElEXCIpO1xuICBjb25zb2xlLmxvZyhcIltDb25zb2xlXSBuYW1lICAgICAgIDogY2hhbmdlIGNlbGwocykgbmFtZSBieSBjbGllbnQgSURcIik7XG4gIGNvbnNvbGUubG9nKFwiW0NvbnNvbGVdIHBsYXllcmxpc3QgOiBnZXQgbGlzdCBvZiBwbGF5ZXJzIGFuZCBib3RzXCIpO1xuICBjb25zb2xlLmxvZyhcIltDb25zb2xlXSBwYXVzZSAgICAgIDogcGF1c2UgZ2FtZSAsIGZyZWV6ZSBhbGwgY2VsbHNcIik7XG4gIGNvbnNvbGUubG9nKFwiW0NvbnNvbGVdIHJlbG9hZCAgICAgOiByZWxvYWQgY29uZmlnXCIpO1xuICBjb25zb2xlLmxvZyhcIltDb25zb2xlXSBzdGF0dXMgICAgIDogZ2V0IHNlcnZlciBzdGF0dXNcIik7XG4gIGNvbnNvbGUubG9nKFwiW0NvbnNvbGVdIHRwICAgICAgICAgOiB0ZWxlcG9ydCBwbGF5ZXIgdG8gc3BlY2lmaWVkIGxvY2F0aW9uXCIpO1xuICBjb25zb2xlLmxvZyhcIltDb25zb2xlXSB2aXJ1cyAgICAgIDogc3Bhd24gdmlydXMgYXQgYSBzcGVjaWZpZWQgTG9jYXRpb25cIik7XG4gIGNvbnNvbGUubG9nKFwiW0NvbnNvbGVdID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRib3QoZ2FtZVNlcnZlcixzcGxpdCkge1xuICB2YXIgYWRkID0gcGFyc2VJbnQoc3BsaXRbMV0pO1xuICBpZiAoaXNOYU4oYWRkKSkge1xuICAgIGFkZCA9IDE7IC8vIEFkZHMgMSBib3QgaWYgdXNlciBkb2VzbnQgc3BlY2lmeSBhIG51bWJlclxuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhZGQ7IGkrKykge1xuICAgIGdhbWVTZXJ2ZXIuYm90cy5hZGRCb3QoKTtcbiAgfVxuICBjb25zb2xlLmxvZyhcIltDb25zb2xlXSBBZGRlZCBcIithZGQrXCIgcGxheWVyIGJvdHNcIik7XG59XG5leHBvcnQgZnVuY3Rpb24gYm9hcmQoZ2FtZVNlcnZlcixzcGxpdCkge1xuICB2YXIgbmV3TEIgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBzcGxpdC5sZW5ndGg7IGkrKykge1xuICAgIG5ld0xCW2kgLSAxXSA9IHNwbGl0W2ldO1xuICB9XG5cbiAgLy8gQ2xlYXJzIHRoZSB1cGRhdGUgbGVhZGVyYm9hcmQgZnVuY3Rpb24gYW5kIHJlcGxhY2VzIGl0IHdpdGggb3VyIG93blxuICBnYW1lU2VydmVyLmdhbWVNb2RlLnBhY2tldExCID0gNDg7XG4gIGdhbWVTZXJ2ZXIuZ2FtZU1vZGUuc3BlY0J5TGVhZGVyYm9hcmQgPSBmYWxzZTtcbiAgZ2FtZVNlcnZlci5nYW1lTW9kZS51cGRhdGVMQiA9IGZ1bmN0aW9uKGdhbWVTZXJ2ZXIpIHtnYW1lU2VydmVyLmxlYWRlcmJvYXJkID0gbmV3TEJ9O1xuICBjb25zb2xlLmxvZyhcIltDb25zb2xlXSBTdWNjZXNzZnVsbHkgY2hhbmdlZCBsZWFkZXJib2FyZCB2YWx1ZXNcIik7XG59XG5leHBvcnQgZnVuY3Rpb24gYm9hcmRyZXNldChnYW1lU2VydmVyKSB7XG4gIC8vIEdldHMgdGhlIGN1cnJlbnQgZ2FtZW1vZGVcbiAgdmFyIGdtID0gZ2V0R2FtZU1vZGUoZ2FtZVNlcnZlci5nYW1lTW9kZS5JRCk7XG5cbiAgLy8gUmVwbGFjZSBmdW5jdGlvbnNcbiAgZ2FtZVNlcnZlci5nYW1lTW9kZS5wYWNrZXRMQiA9IGdtLnBhY2tldExCO1xuICBnYW1lU2VydmVyLmdhbWVNb2RlLnVwZGF0ZUxCID0gZ20udXBkYXRlTEI7XG4gIGNvbnNvbGUubG9nKFwiW0NvbnNvbGVdIFN1Y2Nlc3NmdWxseSByZXNldCBsZWFkZXJib2FyZFwiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjaGFuZ2UoZ2FtZVNlcnZlcixzcGxpdCkge1xuICB2YXIga2V5ID0gc3BsaXRbMV07XG4gIHZhciB2YWx1ZSA9IHNwbGl0WzJdO1xuXG4gIC8vIENoZWNrIGlmIGludC9mbG9hdFxuICBpZiAodmFsdWUuaW5kZXhPZignLicpICE9IC0xKSB7XG4gICAgdmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICB2YWx1ZSA9IHBhcnNlSW50KHZhbHVlKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgZ2FtZVNlcnZlci5jb25maWdba2V5XSAhPSAndW5kZWZpbmVkJykge1xuICAgIGdhbWVTZXJ2ZXIuY29uZmlnW2tleV0gPSB2YWx1ZTtcbiAgICBjb25zb2xlLmxvZyhcIltDb25zb2xlXSBTZXQgXCIgKyBrZXkgKyBcIiB0byBcIiArIHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZyhcIltDb25zb2xlXSBJbnZhbGlkIGNvbmZpZyB2YWx1ZVwiKTtcbiAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyKCkge1xuICBwcm9jZXNzLnN0ZG91dC53cml0ZShcIlxcdTAwMWJbMkpcXHUwMDFiWzA7MEhcIik7XG59XG5leHBvcnQgZnVuY3Rpb24gY29sb3IoZ2FtZVNlcnZlcixzcGxpdCkge1xuICAvLyBWYWxpZGF0aW9uIGNoZWNrc1xuICB2YXIgaWQgPSBwYXJzZUludChzcGxpdFsxXSk7XG4gIGlmIChpc05hTihpZCkpIHtcbiAgICBjb25zb2xlLmxvZyhcIltDb25zb2xlXSBQbGVhc2Ugc3BlY2lmeSBhIHZhbGlkIHBsYXllciBJRCFcIik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGNvbG9yID0ge3I6IDAsIGc6IDAsIGI6IDB9O1xuICBjb2xvci5yID0gTWF0aC5tYXgoTWF0aC5taW4ocGFyc2VJbnQoc3BsaXRbMl0pLCAyNTUpLCAwKTtcbiAgY29sb3IuZyA9IE1hdGgubWF4KE1hdGgubWluKHBhcnNlSW50KHNwbGl0WzNdKSwgMjU1KSwgMCk7XG4gIGNvbG9yLmIgPSBNYXRoLm1heChNYXRoLm1pbihwYXJzZUludChzcGxpdFs0XSksIDI1NSksIDApO1xuXG4gIC8vIFNldHMgY29sb3IgdG8gdGhlIHNwZWNpZmllZCBhbW91bnRcbiAgZm9yICh2YXIgaSBpbiBnYW1lU2VydmVyLmNsaWVudHMpIHtcbiAgICBpZiAoZ2FtZVNlcnZlci5jbGllbnRzW2ldLnBsYXllclRyYWNrZXIucElEID09IGlkKSB7XG4gICAgICB2YXIgY2xpZW50ID0gZ2FtZVNlcnZlci5jbGllbnRzW2ldLnBsYXllclRyYWNrZXI7XG4gICAgICBjbGllbnQuc2V0Q29sb3IoY29sb3IpOyAvLyBTZXQgY29sb3JcbiAgICAgIGZvciAodmFyIGogaW4gY2xpZW50LmNlbGxzKSB7XG4gICAgICAgIGNsaWVudC5jZWxsc1tqXS5zZXRDb2xvcihjb2xvcik7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBleGl0KGdhbWVTZXJ2ZXIsc3BsaXQpIHtcbiAgY29uc29sZS5sb2coXCJbQ29uc29sZV0gQ2xvc2luZyBzZXJ2ZXIuLi5cIik7XG4gIGdhbWVTZXJ2ZXIuc29ja2V0U2VydmVyLmNsb3NlKCk7XG4gIHByb2Nlc3MuZXhpdCgxKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmb29kKGdhbWVTZXJ2ZXIsc3BsaXQpIHtcbiAgdmFyIHBvcyA9IHt4OiBwYXJzZUludChzcGxpdFsxXSksIHk6IHBhcnNlSW50KHNwbGl0WzJdKX07XG4gIHZhciBtYXNzID0gcGFyc2VJbnQoc3BsaXRbM10pO1xuXG4gIC8vIE1ha2Ugc3VyZSB0aGUgaW5wdXQgdmFsdWVzIGFyZSBudW1iZXJzXG4gIGlmIChpc05hTihwb3MueCkgfHwgaXNOYU4ocG9zLnkpKSB7XG4gICAgY29uc29sZS5sb2coXCJbQ29uc29sZV0gSW52YWxpZCBjb29yZGluYXRlc1wiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaXNOYU4obWFzcykpIHtcbiAgICBtYXNzID0gZ2FtZVNlcnZlci5jb25maWcuZm9vZFN0YXJ0TWFzcztcbiAgfVxuXG4gIC8vIFNwYXduXG4gIHZhciBmID0gbmV3IEZvb2QoZ2FtZVNlcnZlci5nZXROZXh0Tm9kZUlkKCksIG51bGwsIHBvcywgbWFzcywgbnVsbCk7XG4gIGYuc2V0Q29sb3IoZ2FtZVNlcnZlci5nZXRSYW5kb21Db2xvcigpKTtcbiAgZ2FtZVNlcnZlci5hZGROb2RlKGYpO1xuICBnYW1lU2VydmVyLmN1cnJlbnRGb29kKys7XG4gIGNvbnNvbGUubG9nKFwiW0NvbnNvbGVdIFNwYXduZWQgMSBmb29kIGNlbGwgYXQgKFwiK3Bvcy54K1wiICwgXCIrcG9zLnkrXCIpXCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdhbWVtb2RlKGdhbWVTZXJ2ZXIsc3BsaXQpIHtcbiAgdHJ5IHtcbiAgICB2YXIgbiA9IHBhcnNlSW50KHNwbGl0WzFdKTtcbiAgICB2YXIgZ20gPSBnZXRHYW1lTW9kZShuKTsgLy8gSWYgdGhlcmUgaXMgYW4gaW52YWxpZCBnYW1lbW9kZSwgdGhlIGZ1bmN0aW9uIHdpbGwgZXhpdFxuICAgIGdhbWVTZXJ2ZXIuZ2FtZU1vZGUub25DaGFuZ2UoZ2FtZVNlcnZlcik7IC8vIFJldmVydHMgdGhlIGNoYW5nZXMgb2YgdGhlIG9sZCBnYW1lbW9kZVxuICAgIGdhbWVTZXJ2ZXIuZ2FtZU1vZGUgPSBnbTsgLy8gQXBwbHkgbmV3IGdhbWVtb2RlXG4gICAgZ2FtZVNlcnZlci5nYW1lTW9kZS5vblNlcnZlckluaXQoZ2FtZVNlcnZlcik7IC8vIFJlc2V0cyB0aGUgc2VydmVyXG4gICAgY29uc29sZS5sb2coXCJbR2FtZV0gQ2hhbmdlZCBnYW1lIG1vZGUgdG8gXCIgKyBnYW1lU2VydmVyLmdhbWVNb2RlLm5hbWUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coXCJbQ29uc29sZV0gSW52YWxpZCBnYW1lIG1vZGUgc2VsZWN0ZWRcIik7XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBraWNrKGdhbWVTZXJ2ZXIsc3BsaXQpIHtcbiAgdmFyIGlkID0gcGFyc2VJbnQoc3BsaXRbMV0pO1xuICBpZiAoaXNOYU4oaWQpKSB7XG4gICAgY29uc29sZS5sb2coXCJbQ29uc29sZV0gUGxlYXNlIHNwZWNpZnkgYSB2YWxpZCBwbGF5ZXIgSUQhXCIpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGZvciAodmFyIGkgaW4gZ2FtZVNlcnZlci5jbGllbnRzKSB7XG4gICAgaWYgKGdhbWVTZXJ2ZXIuY2xpZW50c1tpXS5wbGF5ZXJUcmFja2VyLnBJRCA9PSBpZCkge1xuICAgICAgdmFyIGNsaWVudCA9IGdhbWVTZXJ2ZXIuY2xpZW50c1tpXS5wbGF5ZXJUcmFja2VyO1xuICAgICAgdmFyIGxlbiA9IGNsaWVudC5jZWxscy5sZW5ndGg7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgIGdhbWVTZXJ2ZXIucmVtb3ZlTm9kZShjbGllbnQuY2VsbHNbMF0pO1xuICAgICAgfVxuICAgICAgY2xpZW50LnNvY2tldC5jbG9zZSgpO1xuICAgICAgY29uc29sZS5sb2coXCJbQ29uc29sZV0gS2lja2VkIFwiICsgY2xpZW50Lm5hbWUpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG59XG5leHBvcnQgZnVuY3Rpb24ga2lsbChnYW1lU2VydmVyLHNwbGl0KSB7XG4gIHZhciBpZCA9IHBhcnNlSW50KHNwbGl0WzFdKTtcbiAgaWYgKGlzTmFOKGlkKSkge1xuICAgIGNvbnNvbGUubG9nKFwiW0NvbnNvbGVdIFBsZWFzZSBzcGVjaWZ5IGEgdmFsaWQgcGxheWVyIElEIVwiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgY291bnQgPSAwO1xuICBmb3IgKHZhciBpIGluIGdhbWVTZXJ2ZXIuY2xpZW50cykge1xuICAgIGlmIChnYW1lU2VydmVyLmNsaWVudHNbaV0ucGxheWVyVHJhY2tlci5wSUQgPT0gaWQpIHtcbiAgICAgIHZhciBjbGllbnQgPSBnYW1lU2VydmVyLmNsaWVudHNbaV0ucGxheWVyVHJhY2tlcjtcbiAgICAgIHZhciBsZW4gPSBjbGllbnQuY2VsbHMubGVuZ3RoO1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsZW47IGorKykge1xuICAgICAgICBnYW1lU2VydmVyLnJlbW92ZU5vZGUoY2xpZW50LmNlbGxzWzBdKTtcbiAgICAgICAgY291bnQrKztcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coXCJbQ29uc29sZV0gUmVtb3ZlZCBcIiArIGNvdW50ICsgXCIgY2VsbHNcIik7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBraWxsYWxsKGdhbWVTZXJ2ZXIsc3BsaXQpIHtcbiAgdmFyIGNvdW50ID0gMDtcbiAgdmFyIGxlbiA9IGdhbWVTZXJ2ZXIubm9kZXNQbGF5ZXIubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgZ2FtZVNlcnZlci5yZW1vdmVOb2RlKGdhbWVTZXJ2ZXIubm9kZXNQbGF5ZXJbMF0pO1xuICAgIGNvdW50Kys7XG4gIH1cbiAgY29uc29sZS5sb2coXCJbQ29uc29sZV0gUmVtb3ZlZCBcIiArIGNvdW50ICsgXCIgY2VsbHNcIik7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFzcyhnYW1lU2VydmVyLHNwbGl0KSB7XG4gIC8vIFZhbGlkYXRpb24gY2hlY2tzXG4gIHZhciBpZCA9IHBhcnNlSW50KHNwbGl0WzFdKTtcbiAgaWYgKGlzTmFOKGlkKSkge1xuICAgIGNvbnNvbGUubG9nKFwiW0NvbnNvbGVdIFBsZWFzZSBzcGVjaWZ5IGEgdmFsaWQgcGxheWVyIElEIVwiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgYW1vdW50ID0gTWF0aC5tYXgocGFyc2VJbnQoc3BsaXRbMl0pLDkpO1xuICBpZiAoaXNOYU4oYW1vdW50KSkge1xuICAgIGNvbnNvbGUubG9nKFwiW0NvbnNvbGVdIFBsZWFzZSBzcGVjaWZ5IGEgdmFsaWQgbnVtYmVyXCIpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIFNldHMgbWFzcyB0byB0aGUgc3BlY2lmaWVkIGFtb3VudFxuICBmb3IgKHZhciBpIGluIGdhbWVTZXJ2ZXIuY2xpZW50cykge1xuICAgIGlmIChnYW1lU2VydmVyLmNsaWVudHNbaV0ucGxheWVyVHJhY2tlci5wSUQgPT0gaWQpIHtcbiAgICAgIHZhciBjbGllbnQgPSBnYW1lU2VydmVyLmNsaWVudHNbaV0ucGxheWVyVHJhY2tlcjtcbiAgICAgIGZvciAodmFyIGogaW4gY2xpZW50LmNlbGxzKSB7XG4gICAgICAgIGNsaWVudC5jZWxsc1tqXS5tYXNzID0gYW1vdW50O1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhcIltDb25zb2xlXSBTZXQgbWFzcyBvZiBcIitjbGllbnQubmFtZStcIiB0byBcIithbW91bnQpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gbmFtZShnYW1lU2VydmVyLHNwbGl0KSB7XG4gIC8vIFZhbGlkYXRpb24gY2hlY2tzXG4gIHZhciBpZCA9IHBhcnNlSW50KHNwbGl0WzFdKTtcbiAgaWYgKGlzTmFOKGlkKSkge1xuICAgIGNvbnNvbGUubG9nKFwiW0NvbnNvbGVdIFBsZWFzZSBzcGVjaWZ5IGEgdmFsaWQgcGxheWVyIElEIVwiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgbmFtZSA9IHNwbGl0LnNsaWNlKDIsIHNwbGl0Lmxlbmd0aCkuam9pbignICcpO1xuICBpZiAodHlwZW9mIG5hbWUgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBjb25zb2xlLmxvZyhcIltDb25zb2xlXSBQbGVhc2UgdHlwZSBhIHZhbGlkIG5hbWVcIik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gQ2hhbmdlIG5hbWVcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBnYW1lU2VydmVyLmNsaWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgY2xpZW50ID0gZ2FtZVNlcnZlci5jbGllbnRzW2ldLnBsYXllclRyYWNrZXI7XG5cbiAgICBpZiAoY2xpZW50LnBJRCA9PSBpZCkge1xuICAgICAgY29uc29sZS5sb2coXCJbQ29uc29sZV0gQ2hhbmdpbmcgXCIrY2xpZW50Lm5hbWUrXCIgdG8gXCIrbmFtZSk7XG4gICAgICBjbGllbnQubmFtZSA9IG5hbWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgLy8gRXJyb3JcbiAgY29uc29sZS5sb2coXCJbQ29uc29sZV0gUGxheWVyIFwiK2lkK1wiIHdhcyBub3QgZm91bmRcIik7XG59XG5leHBvcnQgZnVuY3Rpb24gcGxheWVybGlzdChnYW1lU2VydmVyLHNwbGl0KSB7XG4gIGNvbnNvbGUubG9nKFwiW0NvbnNvbGVdIFNob3dpbmcgXCIgKyBnYW1lU2VydmVyLmNsaWVudHMubGVuZ3RoICsgXCIgcGxheWVyczogXCIpO1xuICBjb25zb2xlLmxvZyhcIiBJRCAgICAgICAgIHwgSVAgICAgICAgICAgICAgIHwgXCIrZmlsbENoYXIoJ05JQ0snLCAnICcsIGdhbWVTZXJ2ZXIuY29uZmlnLnBsYXllck1heE5pY2tMZW5ndGgsIGZhbHNlKStcIiB8IENFTExTIHwgU0NPUkUgIHwgUE9TSVRJT04gICAgXCIpOyAvLyBGaWxsIHNwYWNlXG4gIGNvbnNvbGUubG9nKGZpbGxDaGFyKCcnLCAnLScsICcgSUQgICAgICAgICB8IElQICAgICAgICAgICAgICB8ICB8IENFTExTIHwgU0NPUkUgIHwgUE9TSVRJT04gICAgJy5sZW5ndGggKyBnYW1lU2VydmVyLmNvbmZpZy5wbGF5ZXJNYXhOaWNrTGVuZ3RoLCBmYWxzZSkpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGdhbWVTZXJ2ZXIuY2xpZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBjbGllbnQgPSBnYW1lU2VydmVyLmNsaWVudHNbaV0ucGxheWVyVHJhY2tlcjtcblxuICAgIC8vIElEIHdpdGggMyBkaWdpdHMgbGVuZ3RoXG4gICAgdmFyIGlkID0gZmlsbENoYXIoKGNsaWVudC5wSUQpLCAnICcsIDEwLCB0cnVlKTtcblxuICAgIC8vIEdldCBpcCAoMTUgZGlnaXRzIGxlbmd0aClcbiAgICB2YXIgaXAgPSBcIkJPVFwiO1xuICAgIGlmICh0eXBlb2YgZ2FtZVNlcnZlci5jbGllbnRzW2ldLnJlbW90ZUFkZHJlc3MgIT0gJ3VuZGVmaW5lZCcgKSB7XG4gICAgICBpcCA9IGdhbWVTZXJ2ZXIuY2xpZW50c1tpXS5yZW1vdGVBZGRyZXNzO1xuICAgIH1cbiAgICBpcCA9IGZpbGxDaGFyKGlwLCAnICcsIDE1LCBmYWxzZSk7XG5cbiAgICAvLyBHZXQgbmFtZSBhbmQgZGF0YVxuICAgIHZhciBuaWNrID0gJycsIGNlbGxzID0gJycsIHNjb3JlID0gJycsIHBvc2l0aW9uID0gJycsIGRhdGEgPSAnJztcbiAgICBpZiAoY2xpZW50LnNwZWN0YXRlKSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBHZXQgc3BlY3RhdGVkIHBsYXllclxuICAgICAgICBpZiAoZ2FtZVNlcnZlci5nZXRNb2RlKCkuc3BlY0J5TGVhZGVyYm9hcmQpIHsgLy8gR2V0IHNwZWMgdHlwZVxuICAgICAgICAgIG5pY2sgPSBnYW1lU2VydmVyLmxlYWRlcmJvYXJkW2NsaWVudC5zcGVjdGF0ZWRQbGF5ZXJdLm5hbWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmljayA9IGdhbWVTZXJ2ZXIuY2xpZW50c1tjbGllbnQuc3BlY3RhdGVkUGxheWVyXS5wbGF5ZXJUcmFja2VyLm5hbWU7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gU3BlY2F0aW5nIG5vYm9keVxuICAgICAgICBuaWNrID0gXCJcIjtcbiAgICAgIH1cbiAgICAgIG5pY2sgPSAobmljayA9PSBcIlwiKSA/IFwiQW4gdW5uYW1lZCBjZWxsXCIgOiBuaWNrO1xuICAgICAgZGF0YSA9IGZpbGxDaGFyKFwiU1BFQ1RBVElORzogXCIgKyBuaWNrLCAnLScsICcgfCBDRUxMUyB8IFNDT1JFICB8IFBPU0lUSU9OICAgICcubGVuZ3RoICsgZ2FtZVNlcnZlci5jb25maWcucGxheWVyTWF4Tmlja0xlbmd0aCwgdHJ1ZSk7XG4gICAgICBjb25zb2xlLmxvZyhcIiBcIiArIGlkICsgXCIgfCBcIiArIGlwICsgXCIgfCBcIiArIGRhdGEpO1xuICAgIH0gZWxzZSBpZiAoY2xpZW50LmNlbGxzLmxlbmd0aCA+IDApIHtcbiAgICAgIG5pY2sgPSBmaWxsQ2hhcigoY2xpZW50Lm5hbWUgPT0gXCJcIikgPyBcIkFuIHVubmFtZWQgY2VsbFwiIDogY2xpZW50Lm5hbWUsICcgJywgZ2FtZVNlcnZlci5jb25maWcucGxheWVyTWF4Tmlja0xlbmd0aCwgZmFsc2UpO1xuICAgICAgY2VsbHMgPSBmaWxsQ2hhcihjbGllbnQuY2VsbHMubGVuZ3RoLCAnICcsIDUsIHRydWUpO1xuICAgICAgc2NvcmUgPSBmaWxsQ2hhcihjbGllbnQuZ2V0U2NvcmUodHJ1ZSksICcgJywgNiwgdHJ1ZSk7XG4gICAgICBwb3NpdGlvbiA9IGZpbGxDaGFyKGNsaWVudC5jZW50ZXJQb3MueCA+PiAwLCAnICcsIDUsIHRydWUpICsgJywgJyArIGZpbGxDaGFyKGNsaWVudC5jZW50ZXJQb3MueSA+PiAwLCAnICcsIDUsIHRydWUpO1xuICAgICAgY29uc29sZS5sb2coXCIgXCIraWQrXCIgfCBcIitpcCtcIiB8IFwiK25pY2srXCIgfCBcIitjZWxscytcIiB8IFwiK3Njb3JlK1wiIHwgXCIrcG9zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBObyBjZWxscyA9IGRlYWQgcGxheWVyIG9yIGluLW1lbnVcbiAgICAgIGRhdGEgPSBmaWxsQ2hhcignREVBRCBPUiBOT1QgUExBWUlORycsICctJywgJyB8IENFTExTIHwgU0NPUkUgIHwgUE9TSVRJT04gICAgJy5sZW5ndGggKyBnYW1lU2VydmVyLmNvbmZpZy5wbGF5ZXJNYXhOaWNrTGVuZ3RoLCB0cnVlKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiIFwiICsgaWQgKyBcIiB8IFwiICsgaXAgKyBcIiB8IFwiICsgZGF0YSk7XG4gICAgfVxuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gcGF1c2UoZ2FtZVNlcnZlcixzcGxpdCkge1xuICBnYW1lU2VydmVyLnJ1biA9ICFnYW1lU2VydmVyLnJ1bjsgLy8gU3dpdGNoZXMgdGhlIHBhdXNlIHN0YXRlXG4gIHZhciBzID0gZ2FtZVNlcnZlci5ydW4gPyBcIlVucGF1c2VkXCIgOiBcIlBhdXNlZFwiO1xuICBjb25zb2xlLmxvZyhcIltDb25zb2xlXSBcIiArIHMgKyBcIiB0aGUgZ2FtZS5cIik7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVsb2FkKGdhbWVTZXJ2ZXIpIHtcbiAgZ2FtZVNlcnZlci5sb2FkQ29uZmlnKCk7XG4gIGNvbnNvbGUubG9nKFwiW0NvbnNvbGVdIFJlbG9hZGVkIHRoZSBjb25maWcgZmlsZSBzdWNjZXNzZnVsbHlcIik7XG59XG5leHBvcnQgZnVuY3Rpb24gc3RhdHVzKGdhbWVTZXJ2ZXIsc3BsaXQpIHtcbiAgLy8gR2V0IGFtb3VudCBvZiBodW1hbnMvYm90c1xuICB2YXIgaHVtYW5zID0gMCwgYm90cyA9IDA7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZ2FtZVNlcnZlci5jbGllbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKCdfc29ja2V0JyBpbiBnYW1lU2VydmVyLmNsaWVudHNbaV0pIHtcbiAgICAgIGh1bWFucysrO1xuICAgIH0gZWxzZSB7XG4gICAgICBib3RzKys7XG4gICAgfVxuICB9XG4gIC8vXG4gIGNvbnNvbGUubG9nKFwiW0NvbnNvbGVdIENvbm5lY3RlZCBwbGF5ZXJzOiBcIitnYW1lU2VydmVyLmNsaWVudHMubGVuZ3RoK1wiL1wiK2dhbWVTZXJ2ZXIuY29uZmlnLnNlcnZlck1heENvbm5lY3Rpb25zKTtcbiAgY29uc29sZS5sb2coXCJbQ29uc29sZV0gUGxheWVyczogXCIraHVtYW5zK1wiIEJvdHM6IFwiK2JvdHMpO1xuICBjb25zb2xlLmxvZyhcIltDb25zb2xlXSBTZXJ2ZXIgaGFzIGJlZW4gcnVubmluZyBmb3IgXCIrcHJvY2Vzcy51cHRpbWUoKStcIiBzZWNvbmRzLlwiKTtcbiAgY29uc29sZS5sb2coXCJbQ29uc29sZV0gQ3VycmVudCBtZW1vcnkgdXNhZ2U6IFwiK3Byb2Nlc3MubWVtb3J5VXNhZ2UoKS5oZWFwVXNlZC8xMDAwK1wiL1wiK3Byb2Nlc3MubWVtb3J5VXNhZ2UoKS5oZWFwVG90YWwvMTAwMCtcIiBrYlwiKTtcbiAgY29uc29sZS5sb2coXCJbQ29uc29sZV0gQ3VycmVudCBnYW1lIG1vZGU6IFwiK2dhbWVTZXJ2ZXIuZ2FtZU1vZGUubmFtZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gdHAoZ2FtZVNlcnZlcixzcGxpdCkge1xuICB2YXIgaWQgPSBwYXJzZUludChzcGxpdFsxXSk7XG4gIGlmIChpc05hTihpZCkpIHtcbiAgICBjb25zb2xlLmxvZyhcIltDb25zb2xlXSBQbGVhc2Ugc3BlY2lmeSBhIHZhbGlkIHBsYXllciBJRCFcIik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gTWFrZSBzdXJlIHRoZSBpbnB1dCB2YWx1ZXMgYXJlIG51bWJlcnNcbiAgdmFyIHBvcyA9IHt4OiBwYXJzZUludChzcGxpdFsyXSksIHk6IHBhcnNlSW50KHNwbGl0WzNdKX07XG4gIGlmIChpc05hTihwb3MueCkgfHwgaXNOYU4ocG9zLnkpKSB7XG4gICAgY29uc29sZS5sb2coXCJbQ29uc29sZV0gSW52YWxpZCBjb29yZGluYXRlc1wiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBTcGF3blxuICBmb3IgKHZhciBpIGluIGdhbWVTZXJ2ZXIuY2xpZW50cykge1xuICAgIGlmIChnYW1lU2VydmVyLmNsaWVudHNbaV0ucGxheWVyVHJhY2tlci5wSUQgPT0gaWQpIHtcbiAgICAgIHZhciBjbGllbnQgPSBnYW1lU2VydmVyLmNsaWVudHNbaV0ucGxheWVyVHJhY2tlcjtcbiAgICAgIGZvciAodmFyIGogaW4gY2xpZW50LmNlbGxzKSB7XG4gICAgICAgIGNsaWVudC5jZWxsc1tqXS5wb3NpdGlvbi54ID0gcG9zLng7XG4gICAgICAgIGNsaWVudC5jZWxsc1tqXS5wb3NpdGlvbi55ID0gcG9zLnk7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKFwiW0NvbnNvbGVdIFRlbGVwb3J0ZWQgXCIrY2xpZW50Lm5hbWUrXCIgdG8gKFwiK3Bvcy54K1wiICwgXCIrcG9zLnkrXCIpXCIpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gdmlydXMoZ2FtZVNlcnZlcixzcGxpdCkge1xuICB2YXIgcG9zID0ge3g6IHBhcnNlSW50KHNwbGl0WzFdKSwgeTogcGFyc2VJbnQoc3BsaXRbMl0pfTtcbiAgdmFyIG1hc3MgPSBwYXJzZUludChzcGxpdFszXSk7XG5cbiAgLy8gTWFrZSBzdXJlIHRoZSBpbnB1dCB2YWx1ZXMgYXJlIG51bWJlcnNcbiAgaWYgKGlzTmFOKHBvcy54KSB8fCBpc05hTihwb3MueSkpIHtcbiAgICBjb25zb2xlLmxvZyhcIltDb25zb2xlXSBJbnZhbGlkIGNvb3JkaW5hdGVzXCIpO1xuICAgIHJldHVybjtcbiAgfSBpZiAoaXNOYU4obWFzcykpIHtcbiAgICBtYXNzID0gZ2FtZVNlcnZlci5jb25maWcudmlydXNTdGFydE1hc3M7XG4gIH1cblxuICAvLyBTcGF3blxuICB2YXIgdiA9IG5ldyBWaXJ1cyhnYW1lU2VydmVyLmdldE5leHROb2RlSWQoKSwgbnVsbCwgcG9zLCBtYXNzLCBudWxsKTtcbiAgZ2FtZVNlcnZlci5hZGROb2RlKHYpO1xuICBjb25zb2xlLmxvZyhcIltDb25zb2xlXSBTcGF3bmVkIDEgdmlydXMgYXQgKFwiK3Bvcy54K1wiICwgXCIrcG9zLnkrXCIpXCIpO1xufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9