{"version":3,"sources":["ai/BotLoader.ts"],"names":["BotLoader","BotLoader.constructor","BotLoader.getName","BotLoader.loadNames","BotLoader.addBot"],"mappings":";;;;;;;;;;;;yBACsB,aAAa;;;;0BACZ,cAAc;;;;6BACX,kBAAkB;;;;IAG5C,SAAA;AAKEA,aALF,SAAA,CAKcA,UAAsBA,EAAAA;8BALpC,SAAA;;AAMIC,YAAIA,CAACA,UAAUA,GAAGA,UAAUA,CAACA;AAC7BA,YAAIA,CAACA,SAASA,EAAEA,CAACA;KAClBA;;iBARH,SAAA;;eAWSD,mBAAAA;AACLE,gBAAIA,IAAIA,GAAGA,EAAEA,CAACA;AAGdA,gBAAIA,IAAIA,CAACA,WAAWA,CAACA,MAAMA,GAAGA,CAACA,EAAEA;AAC/BA,oBAAIA,KAAKA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,IAAIA,CAACA,MAAMA,EAAEA,GAAGA,IAAIA,CAACA,WAAWA,CAACA,MAAMA,CAACA,CAACA;AAChEA,oBAAIA,GAAGA,IAAIA,CAACA,WAAWA,CAACA,KAAKA,CAACA,CAACA;AAC/BA,oBAAIA,CAACA,WAAWA,CAACA,MAAMA,CAACA,KAAKA,EAACA,CAACA,CAACA,CAACA;aAClCA,MAAMA;AACLA,oBAAIA,GAAGA,KAAKA,GAAGA,EAAEA,IAAIA,CAACA,SAASA,CAACA;aACjCA;AAEDA,mBAAOA,IAAIA,CAACA;SACbA;;;eAEQF,qBAAAA;AACPG,gBAAIA,CAACA,WAAWA,GAAGA,EAAEA,CAACA;AAGtBA,gBAAIA;AACFA,oBAAIA,EAAEA,GAAGA,OAAOA,CAACA,IAAIA,CAACA,CAACA;AAGvBA,oBAAIA,CAACA,WAAWA,GAAGA,EAAEA,CAACA,YAAYA,CAACA,gBAAgBA,EAAEA,MAAMA,CAACA,CAACA,KAAKA,CAACA,SAASA,CAACA,CAACA,MAAMA,CAACA,UAASA,CAACA,EAAAA;AAC7F,2BAAO,CAAC,IAAI,EAAE,CAAC;iBAChB,CAACA,CAACA;aACHA,CAAAA,OAAOA,CAACA,EAAEA,EAEXA;AAEDA,gBAAIA,CAACA,SAASA,GAAGA,CAACA,CAACA;SACpBA;;;eAEKH,kBAAAA;AACJI,gBAAIA,CAACA,GAAGA,4BAAeA,IAAIA,CAACA,UAAUA,CAACA,CAACA;AACxCA,aAACA,CAACA,aAAaA,GAAGA,2BAAcA,IAAIA,CAACA,UAAUA,EAAEA,CAACA,CAACA,CAACA;AACpDA,aAACA,CAACA,aAAaA,GAAGA,+BAAkBA,IAAIA,CAACA,UAAUA,EAAEA,CAACA,CAACA,CAACA;AAGxDA,gBAAIA,CAACA,UAAUA,CAACA,OAAOA,CAACA,IAAIA,CAACA,CAACA,CAACA,CAACA;AAGhCA,aAACA,CAACA,aAAaA,CAACA,WAAWA,CAACA,IAAIA,CAACA,OAAOA,EAAEA,CAACA,CAACA;SAC7CA;;;WAtDH,SAAA;;;qBAAA,SAAA","file":"ai/BotLoader.js","sourcesContent":["// Project imports\nimport BotPlayer from './BotPlayer';\nimport FakeSocket from './FakeSocket';\nimport PacketHandler from '../PacketHandler';\nimport GameServer from '../GameServer';\n\nexport default class BotLoader {\n  gameServer: GameServer;\n  randomNames: string[];\n  nameIndex: number;\n\n  constructor(gameServer: GameServer){\n    this.gameServer = gameServer;\n    this.loadNames();\n  }\n\n\n  getName() {\n    var name = \"\";\n\n    // Picks a random name for the bot\n    if (this.randomNames.length > 0) {\n      var index = Math.floor(Math.random() * this.randomNames.length);\n      name = this.randomNames[index];\n      this.randomNames.splice(index,1);\n    } else {\n      name = \"bot\" + ++this.nameIndex;\n    }\n\n    return name;\n  };\n\n  loadNames() {\n    this.randomNames = [];\n\n    // Load names\n    try {\n      var fs = require(\"fs\"); // Import the util library\n\n      // Read and parse the names - filter out whitespace-only names\n      this.randomNames = fs.readFileSync(\"./botnames.txt\", \"utf8\").split(/[\\r\\n]+/).filter(function(x) {\n        return x != ''; // filter empty names\n      });\n    } catch (e) {\n      // Nothing, use the default names\n    }\n\n    this.nameIndex = 0;\n  };\n\n  addBot() {\n    var s = new FakeSocket(this.gameServer);\n    s.playerTracker = new BotPlayer(this.gameServer, s);\n    s.packetHandler = new PacketHandler(this.gameServer, s);\n\n    // Add to client list\n    this.gameServer.clients.push(s);\n\n    // Add to world\n    s.packetHandler.setNickname(this.getName());\n  };\n\n\n}\n"],"sourceRoot":"/source/"}