{"version":3,"sources":["packet/UpdateLeaderboard.ts"],"names":["UpdateLeaderboard","UpdateLeaderboard.constructor","UpdateLeaderboard.build"],"mappings":";;;;;;;;;;IAAA,iBAAA;AAIEA,aAJF,iBAAA,CAIcA,WAAWA,EAAEA,QAAQA,EAAAA;8BAJnC,iBAAA;;AAKIC,YAAIA,CAACA,WAAWA,GAAGA,WAAWA,CAACA;AAC/BA,YAAIA,CAACA,QAAQA,GAAGA,QAAQA,CAACA;KAC1BA;;iBAPH,iBAAA;;eASOD,iBAAAA;AAEHE,gBAAIA,EAAEA,GAAGA,IAAIA,CAACA,WAAWA,CAACA;AAC1BA,gBAAIA,UAAUA,GAAGA,CAACA,CAACA;AACnBA,gBAAIA,aAAaA,GAAGA,CAACA,CAACA;AAEtBA,oBAAQA,IAAIA,CAACA,QAAQA;AACnBA,qBAAKA,EAAEA;AAELA,yBAAKA,IAAIA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,EAAEA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,EAAEA;AAClCA,4BAAIA,OAAOA,EAAEA,CAACA,CAACA,CAACA,IAAIA,WAAWA,EAAEA;AAC/BA,qCAASA;yBACVA;AAEDA,4BAAIA,IAAIA,GAAGA,EAAEA,CAACA,CAACA,CAACA,CAACA;AACjBA,kCAAUA,IAAIA,CAACA,CAACA;AAChBA,kCAAUA,IAAIA,IAAIA,CAACA,MAAMA,GAAGA,CAACA,CAAEA;AAC/BA,kCAAUA,IAAIA,CAACA,CAACA;AAEhBA,qCAAaA,EAAEA,CAACA;qBACjBA;AAEDA,wBAAIA,GAAGA,GAAGA,IAAIA,WAAWA,CAACA,UAAUA,CAACA,CAACA;AACtCA,wBAAIA,IAAIA,GAAGA,IAAIA,QAAQA,CAACA,GAAGA,CAACA,CAACA;AAG7BA,wBAAIA,CAACA,QAAQA,CAACA,CAACA,EAAEA,EAAEA,CAACA,CAACA;AACrBA,wBAAIA,CAACA,SAASA,CAACA,CAACA,EAAEA,aAAaA,EAAEA,IAAIA,CAACA,CAACA;AACvCA,wBAAIA,MAAMA,GAAGA,CAACA,CAACA;AAGfA,yBAAKA,IAAIA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,EAAEA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,EAAEA;AAClCA,4BAAIA,OAAOA,EAAEA,CAACA,CAACA,CAACA,IAAIA,WAAWA,EAAEA;AAC/BA,qCAASA;yBACVA;AAEDA,4BAAIA,IAAIA,GAAGA,EAAEA,CAACA,CAACA,CAACA,CAACA;AAEjBA,4BAAIA,CAACA,SAASA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,IAAIA,CAACA,CAACA;AAChCA,8BAAMA,IAAIA,CAACA,CAACA;AAEZA,6BAAKA,IAAIA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,IAAIA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,EAAEA;AACpCA,gCAAIA,CAACA,SAASA,CAACA,MAAMA,EAAEA,IAAIA,CAACA,UAAUA,CAACA,CAACA,CAACA,EAAEA,IAAIA,CAACA,CAACA;AACjDA,kCAAMA,IAAIA,CAACA,CAACA;yBACbA;AAEDA,4BAAIA,CAACA,SAASA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,IAAIA,CAACA,CAACA;AAChCA,8BAAMA,IAAIA,CAACA,CAACA;qBACbA;AACDA,2BAAOA,GAAGA,CAACA;AACXA,0BAAMA;AAAAA,AACRA,qBAAKA,EAAEA;AAELA,yBAAKA,IAAIA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,EAAEA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,EAAEA;AAClCA,4BAAIA,OAAOA,EAAEA,CAACA,CAACA,CAACA,IAAIA,WAAWA,EAAEA;AAC/BA,qCAASA;yBACVA;AAEDA,4BAAIA,IAAIA,GAAGA,EAAEA,CAACA,CAACA,CAACA,CAACA;AACjBA,kCAAUA,IAAIA,CAACA,CAACA;AAChBA,kCAAUA,IAAIA,IAAIA,CAACA,OAAOA,EAAEA,GAAGA,IAAIA,CAACA,OAAOA,EAAEA,CAACA,MAAMA,GAAGA,CAACA,GAAGA,CAACA,CAACA;AAC7DA,kCAAUA,IAAIA,CAACA,CAACA;AAEhBA,qCAAaA,EAAEA,CAACA;qBACjBA;AAEDA,wBAAIA,GAAGA,GAAGA,IAAIA,WAAWA,CAACA,UAAUA,CAACA,CAACA;AACtCA,wBAAIA,IAAIA,GAAGA,IAAIA,QAAQA,CAACA,GAAGA,CAACA,CAACA;AAG7BA,wBAAIA,CAACA,QAAQA,CAACA,CAACA,EAAEA,IAAIA,CAACA,QAAQA,CAACA,CAACA;AAChCA,wBAAIA,CAACA,SAASA,CAACA,CAACA,EAAEA,aAAaA,EAAEA,IAAIA,CAACA,CAACA;AAEvCA,wBAAIA,MAAMA,GAAGA,CAACA,CAACA;AACfA,yBAAKA,IAAIA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,EAAEA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,EAAEA;AAClCA,4BAAIA,OAAOA,EAAEA,CAACA,CAACA,CAACA,IAAIA,WAAWA,EAAEA;AAC/BA,qCAASA;yBACVA;AAEDA,4BAAIA,IAAIA,GAAGA,EAAEA,CAACA,CAACA,CAACA,CAACA;AAEjBA,4BAAIA,MAAMA,GAAGA,CAACA,CAACA;AACfA,4BAAIA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA,EAAEA;AACjBA,kCAAMA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA,CAACA,MAAMA,CAACA;yBAC/BA;AAEDA,4BAAIA,CAACA,SAASA,CAACA,MAAMA,EAAEA,MAAMA,EAAEA,IAAIA,CAACA,CAACA;AACrCA,8BAAMA,IAAIA,CAACA,CAACA;AAGZA,4BAAIA,IAAIA,GAAGA,IAAIA,CAACA,OAAOA,EAAEA,CAACA;AAC1BA,4BAAIA,IAAIA,EAAEA;AACRA,iCAAKA,IAAIA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,IAAIA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,EAAEA;AACpCA,oCAAIA,CAACA,SAASA,CAACA,MAAMA,EAAEA,IAAIA,CAACA,UAAUA,CAACA,CAACA,CAACA,EAAEA,IAAIA,CAACA,CAACA;AACjDA,sCAAMA,IAAIA,CAACA,CAACA;6BACbA;yBACFA;AAEDA,4BAAIA,CAACA,SAASA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,IAAIA,CAACA,CAACA;AAChCA,8BAAMA,IAAIA,CAACA,CAACA;qBACbA;AACDA,2BAAOA,GAAGA,CAACA;AAAAA,AACbA,qBAAKA,EAAEA;AACLA,iCAAaA,GAAGA,EAAEA,CAACA,MAAMA,CAACA;AAC1BA,8BAAUA,IAAKA,aAAaA,GAAGA,CAACA,AAACA,CAACA;AAElCA,wBAAIA,GAAGA,GAAGA,IAAIA,WAAWA,CAACA,UAAUA,CAACA,CAACA;AACtCA,wBAAIA,IAAIA,GAAGA,IAAIA,QAAQA,CAACA,GAAGA,CAACA,CAACA;AAE7BA,wBAAIA,CAACA,QAAQA,CAACA,CAACA,EAAEA,IAAIA,CAACA,QAAQA,CAACA,CAACA;AAChCA,wBAAIA,CAACA,SAASA,CAACA,CAACA,EAAEA,aAAaA,EAAEA,IAAIA,CAACA,CAACA;AAEvCA,wBAAIA,MAAMA,GAAGA,CAACA,CAACA;AACfA,yBAAKA,IAAIA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,aAAaA,EAACA,CAACA,EAAEA,EAAEA;AACrCA,4BAAIA,CAACA,UAAUA,CAACA,MAAMA,EAAEA,EAAEA,CAACA,CAACA,CAACA,EAAEA,IAAIA,CAACA,CAACA;AACrCA,8BAAMA,IAAIA,CAACA,CAACA;qBACbA;AAEDA,2BAAOA,GAAGA,CAACA;AAAAA,AACbA;AACEA,0BAAMA;AAAAA,aACTA;SACFA;;;WAnIH,iBAAA;;;qBAAA,iBAAA","file":"packet/UpdateLeaderboard.js","sourcesContent":["export default class UpdateLeaderboard{\n  leaderboard: any;\n  packetLB: any;\n\n  constructor(leaderboard, packetLB) {\n    this.leaderboard = leaderboard;\n    this.packetLB = packetLB;\n  }\n\n  build() {\n    // First, calculate the size\n    var lb = this.leaderboard;\n    var bufferSize = 5;\n    var validElements = 0;\n\n    switch (this.packetLB) {\n      case 48: // Custom Text List\n        // Get size of packet\n        for (var i = 0; i < lb.length; i++) {\n          if (typeof lb[i] == \"undefined\") {\n            continue;\n          }\n\n          var item = lb[i];\n          bufferSize += 4; // Empty ID\n          bufferSize += item.length * 2 ; // String length\n          bufferSize += 2; // Name terminator\n\n          validElements++;\n        }\n\n        var buf = new ArrayBuffer(bufferSize);\n        var view = new DataView(buf);\n\n        // Set packet data\n        view.setUint8(0, 49); // Packet ID\n        view.setUint32(1, validElements, true); // Number of elements\n        var offset = 5;\n\n        // Loop through strings\n        for (var i = 0; i < lb.length; i++) {\n          if (typeof lb[i] == \"undefined\") {\n            continue;\n          }\n\n          var item = lb[i];\n\n          view.setUint32(offset, 1, true);\n          offset += 4;\n\n          for (var j = 0; j < item.length; j++) {\n            view.setUint16(offset, item.charCodeAt(j), true);\n            offset += 2;\n          }\n\n          view.setUint16(offset, 0, true);\n          offset += 2;\n        }\n        return buf;\n        break;\n      case 49: // FFA-type Packet (List)\n        // Get size of packet\n        for (var i = 0; i < lb.length; i++) {\n          if (typeof lb[i] == \"undefined\") {\n            continue;\n          }\n\n          var item = lb[i];\n          bufferSize += 4; // Element ID\n          bufferSize += item.getName() ? item.getName().length * 2 : 0; // Name\n          bufferSize += 2; // Name terminator\n\n          validElements++;\n        }\n\n        var buf = new ArrayBuffer(bufferSize);\n        var view = new DataView(buf);\n\n        // Set packet data\n        view.setUint8(0, this.packetLB); // Packet ID\n        view.setUint32(1, validElements, true); // Number of elements\n\n        var offset = 5;\n        for (var i = 0; i < lb.length; i++) {\n          if (typeof lb[i] == \"undefined\") {\n            continue;\n          }\n\n          var item = lb[i];\n\n          var nodeID = 0; // Get node id of player's 1st cell\n          if (item.cells[0]) {\n            nodeID = item.cells[0].nodeId;\n          }\n\n          view.setUint32(offset, nodeID, true);\n          offset += 4;\n\n          // Set name\n          var name = item.getName();\n          if (name) {\n            for (var j = 0; j < name.length; j++) {\n              view.setUint16(offset, name.charCodeAt(j), true);\n              offset += 2;\n            }\n          }\n\n          view.setUint16(offset, 0, true);\n          offset += 2;\n        }\n        return buf;\n      case 50: // Teams-type Packet (Pie Chart)\n        validElements = lb.length;\n        bufferSize += (validElements * 4);\n\n        var buf = new ArrayBuffer(bufferSize);\n        var view = new DataView(buf);\n\n        view.setUint8(0, this.packetLB); // Packet ID\n        view.setUint32(1, validElements, true); // Number of elements\n\n        var offset = 5;\n        for (var i = 0; i < validElements;i++) {\n          view.setFloat32(offset, lb[i], true); // Number of elements\n          offset += 4;\n        }\n\n        return buf;\n      default:\n        break;\n    }\n  };\n\n}\n"],"sourceRoot":"/source/"}